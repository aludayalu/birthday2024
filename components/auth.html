<head>
    <link rel="stylesheet" href="main.css"></link>
    {tailwind}
    {daisyui}
    <meta id="Viewport" name="viewport" content="initial-scale=0.84, maximum-scale=0.84, minimum-scale=0.84, user-scalable=yes"></meta>
    <script src="main.js"></script>
</head>

<script>
    var auth=Signal("auth", "login")
    var passwordVisible=Signal("passwordVisible", "password")
    function FlipAuth() {
        if (auth.Value()=="login") {
            auth.setValue("register")
        } else {
            auth.setValue("login")
        }
    }
    function Submit(e) {
        e.preventDefault()
        fetch("/auth?username="+encodeURIComponent(document.getElementById("username").value)+"&password="+encodeURIComponent(document.getElementById("password").value)+"&method="+auth.Value()).then(async (x)=>{
            var json=await x.json()
            if (json.error=="") {
                document.cookie="username="+document.getElementById("username").value+";"
                document.cookie="password="+document.getElementById("password").value+";"
                window.location=window.location.href
            } else {
                alert(json.error)
            }
        })
    }
    function Checkbox(e) {
        if (e.target.checked) {
            passwordVisible.setValue("text")
        } else {
            passwordVisible.setValue("password")
        }
    }
    DerivedFrom("authMessage", ()=>{
        if (auth.Value()=="login") {
            return "Don't have an account?"
        } else {
            return "Already have an account?"
        }
    }, ["auth"])
</script>

<body>
    <div class="wrapper bg-base-200" style="height: 100vh; width: 100vw;">
        <div class="w-full max-w-sm mx-auto overflow-hidden rounded-lg shadow-md dark:bg-gray-800">
            <div class="px-6 py-4">
                <div class="flex justify-center mx-auto">
                    <img class="w-auto h-7 sm:h-8" src="logo.svg" alt=""></img>
                </div>
        
                <h3 class="mt-3 text-xl font-medium text-center text-gray-600 dark:text-gray-200">Welcome Back</h3>
        
                <p class="mt-1 text-center text-gray-500 dark:text-gray-400">Login or create account</p>
        
                <form onsubmit="Submit(event)">
                    <div class="w-full mt-4">
                        <input required class="block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-500 bg-white border rounded-lg dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 focus:border-blue-400 dark:focus:border-blue-300 focus:ring-opacity-40 focus:outline-none focus:ring focus:ring-blue-300" id="username" placeholder="Username" aria-label="Email Address" /></input>
                    </div>
        
                    <div class="w-full mt-4">
                        <input required class="block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-500 bg-white border rounded-lg dark:bg-gray-800 dark:border-gray-600 dark:placeholder-gray-400 focus:border-blue-400 dark:focus:border-blue-300 focus:ring-opacity-40 focus:outline-none focus:ring focus:ring-blue-300" id="password" type="password" placeholder="Password" aria-label="Password" /></input>
                    </div>
        
                    <div class="flex items-center justify-between mt-4">
                        <a href="#" class="text-sm text-gray-600 dark:text-gray-200 hover:text-gray-500">Forget Password?</a>
        
                        <button type="submit" class="px-6 py-2 text-sm font-medium tracking-wide text-white capitalize transition-colors duration-300 transform bg-blue-500 rounded-lg hover:bg-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-50">
                            <if "auth.Value()=='login'" dep:auth>
                                Login
                            </if>
                            <if "auth.Value()!='login'" dep:auth>
                                Register
                            </if>
                        </button>
                    </div>
                </form>
            </div>
        
            <div class="flex items-center justify-center py-4 text-center bg-gray-50 dark:bg-gray-700">
                <span class="text-sm text-gray-600 dark:text-gray-200">{authMessage}</span>
        
                <a class="mx-2 text-sm font-bold text-blue-500 dark:text-blue-400 hover:underline" onclick="FlipAuth()">
                    <if "auth.Value()!='login'" dep:auth>
                        Login
                    </if>
                    <if "auth.Value()=='login'" dep:auth>
                        Register
                    </if>
                </a>
            </div>
        </div>
    </div>
</body>